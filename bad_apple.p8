pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
--main
print("dropfile")
repeat
until stat(120)
cls()
polys={{}}
i=0
p = 1
size=0
function _update()	
	byte=0
	while byte!=0xff do
	if i>=size then
		size = serial(0x800,0x4300,1000)
		if size==0 then
			stop("done")
		end
		i=0
	end
		byte = peek(0x4300+i)
		if byte!=0xff and byte!=0xfe then
			add(polys[p],byte)
		end
		if byte==0xfe then
			p+=1
			add(polys,{})
		end
		i+=1
	end
	
end

function _draw()
	cls()
	for poly in all(polys) do
		line(poly[1],poly[2],poly[1],poly[2])
		for i=1,#poly,2 do
			if poly[i]==0xff then
				stop("here")
			end
			line(poly[i],poly[i+1],7)
			
		end
	end
	polys={{}}
	p=1
end

-->8
--fill

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
